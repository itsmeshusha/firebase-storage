(this["webpackJsonpredux-firebase"]=this["webpackJsonpredux-firebase"]||[]).push([[0],{141:function(e,t,n){e.exports={mainBlock:"PhotosPage_mainBlock__tQYFH",item:"PhotosPage_item__2kiXV"}},215:function(e,t,n){e.exports={btn:"Signin_btn__1UJ3G"}},217:function(e,t,n){e.exports={btn:"Signout_btn__3gIH9"}},229:function(e,t,n){},230:function(e,t,n){},421:function(e,t,n){"use strict";n.r(t),n.d(t,"storage",(function(){return M})),n.d(t,"database",(function(){return Q}));var r=n(11),a=n(2),c=n.n(a),i=n(90),s=n.n(i),o=(n(229),n(230),n(63)),u=n.n(o),l=n(215),b=n.n(l),d=n(23),f=n(13),p={auth:!1},j=function(e){return{type:"AUTH/AUTH_WITH_GOOGLE",auth:e}},O=n(5),h=function(){var e=Object(f.b)(),t=Object(d.useFirebase)();return Object(O.jsx)("div",{children:Object(O.jsx)("button",{className:b.a.btn,onClick:function(){t.login({provider:"google",type:"redirect"}).then((function(t){e(j(!!t))})).catch((function(t){e(j(!1))}))},children:"Sign In with Google"})})},m=n(217),g=n.n(m),x=function(){var e=Object(d.useFirebase)(),t=Object(f.b)();return Object(O.jsx)("div",{children:Object(O.jsx)("button",{className:g.a.btn,onClick:function(){e.logout().then((function(){return t(j(!1))}))},children:"Sign Out"})})},v=n(29),_=n(93),P=n(94),S=n.n(P),T=n(28),y=n.n(T),w=n(64),A={status:"idle",error:null},H=function(e){return{type:"APP/SET-STATUS",status:e}},U={photos:[]},k=function(e){return{type:"PHOTOS/SET-PHOTOS",photos:e}},F=function(e){return{type:"PHOTOS/UPLOAD-PHOTOS",photo:e}},N=function(){var e=Object(a.useState)(""),t=Object(_.a)(e,2),n=(t[0],t[1]),r=Object(f.b)(),c=function(e){var t=Object(v.a)(e),a=0;t.forEach((function(e){r(H("loading")),M.ref("images/".concat(e.name)).put(e).on("state_changed",(function(e){}),(function(e){console.log(e)}),(function(){M.ref("images").child(e.name).getDownloadURL().then((function(c){var i;n(c),r(H("succeeded")),a+=1,t.length>a&&r(H("loading")),r((i=e,function(){var e=Object(w.a)(y.a.mark((function e(t,n,r){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",r().storage().ref("images").listAll().then(function(){var e=Object(w.a)(y.a.mark((function e(n){var r;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(n.items.map((function(e){return e.getDownloadURL()})));case 2:r=e.sent,t(F(i)),t(k(r));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()))}))}))}))};return Object(O.jsx)("div",{className:S.a.mainBlock,children:Object(O.jsx)("div",{className:S.a.item,children:Object(O.jsxs)("label",{children:[Object(O.jsx)("input",{type:"file",style:{display:"none"},multiple:!0,onChange:function(e){e.target.files&&c(e.target.files)}}),Object(O.jsx)("span",{className:S.a.btn,children:"Upload"})]})})})},E=n(431),I=function(){var e=Object(f.c)((function(e){return e.firebase.auth})),t=Object(f.c)((function(e){return e.app.status}));return Object(O.jsxs)("div",{className:u.a.header,children:["loading"===t&&Object(O.jsx)(E.a,{className:"linearProgress",color:"primary"}),e&&e.uid?Object(O.jsx)("div",{className:u.a.item,children:Object(O.jsx)(x,{})}):Object(O.jsx)("div",{className:u.a.item,children:Object(O.jsx)(h,{})}),Object(O.jsx)("div",{className:u.a.item,children:Object(O.jsx)(N,{})})]})},B=n(141),L=n.n(B),R=function(){var e=Object(f.c)((function(e){return e.photos.photos})),t=Object(f.b)();return Object(a.useEffect)((function(){t(function(){var e=Object(w.a)(y.a.mark((function e(t,n,r){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(H("loading")),e.abrupt("return",r().storage().ref("images").listAll().then(function(){var e=Object(w.a)(y.a.mark((function e(n){var r;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(n.items.map((function(e){return e.getDownloadURL()})));case 2:r=e.sent,t(k(r)),t(H("succeeded"));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 2:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}())}),[]),Object(O.jsx)("div",{className:L.a.mainBlock,children:Object(O.jsx)("div",{className:L.a.item,children:e.map((function(e){return Object(O.jsx)("img",{src:e},e)}))})})};var D=function(){var e=Object(f.c)((function(e){return e.app.status}));return Object(O.jsxs)("div",{className:"App",children:["loading"===e&&Object(O.jsx)(E.a,{className:"linearProgress",color:"primary"}),Object(O.jsx)(I,{}),Object(O.jsx)(R,{})]})},C=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,432)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),r(e),a(e),c(e),i(e)}))},G=n(65),J=n(221),X=n(92),z=Object(G.b)({firebase:d.firebaseReducer,firestore:X.firestoreReducer,auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"AUTH/AUTH_WITH_GOOGLE":return Object(r.a)(Object(r.a)({},e),{},{auth:t.auth})}return e},app:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"APP/SET-STATUS":return Object(r.a)(Object(r.a)({},e),{},{status:t.status});case"APP/SET-ERROR":return Object(r.a)(Object(r.a)({},e),{},{error:t.error});default:return e}},photos:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"PHOTOS/SET-PHOTOS":return Object(r.a)(Object(r.a)({},e),{},{photos:t.photos});case"PHOTOS/UPLOAD-PHOTOS":return{photos:[t.photo].concat(Object(v.a)(e.photos))};default:return e}}}),V=[J.a.withExtraArgument(d.getFirebase)],W=Object(G.d)(z,Object(G.c)(G.a.apply(void 0,V)));window.store=W;var Y=n(39);n(419),n(420);Y.a.initializeApp({apiKey:"AIzaSyB0xJ6ldu2hdTYMAxaXJPh4JqojcWQPPaA",authDomain:"redux-firebase1.firebaseapp.com",projectId:"redux-firebase1",storageBucket:"redux-firebase1.appspot.com",messagingSenderId:"541972609459",appId:"1:541972609459:web:84c97c0025a541d265b3c6",databaseURL:"https://redux-firebase1-default-rtdb.firebaseio.com",measurementId:"G-40DHBB2EXX"}),Y.a.firestore(),Y.a.firestore().enablePersistence();var M=Y.a.storage(),Q=Y.a.database(),q={firebase:Y.a,config:{userProfile:"users",useFirestoreForProfile:!0},dispatch:W.dispatch,createFirestoreInstance:X.createFirestoreInstance};s.a.render(Object(O.jsx)(c.a.StrictMode,{children:Object(O.jsx)(f.a,{store:W,children:Object(O.jsx)(d.ReactReduxFirebaseProvider,Object(r.a)(Object(r.a)({},q),{},{children:Object(O.jsx)(D,{})}))})}),document.getElementById("root")),C()},63:function(e,t,n){e.exports={header:"Header_header__1LVZC",btn:"Header_btn__1fVh5",item:"Header_item__z0a-2"}},94:function(e,t,n){e.exports={mainBlock:"UploadFile_mainBlock__1m3cp",item:"UploadFile_item__YSHhA",btn:"UploadFile_btn__1AyUN"}}},[[421,1,2]]]);
//# sourceMappingURL=main.4ba7e0bf.chunk.js.map